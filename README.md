# T-Rex Game Remake

## 项目介绍

T-Rex是Chorem浏览器的一个小彩蛋，当你的chrome浏览器进入离线模式后，会出现这个小恐龙游戏，本项目是使用cocos creator引擎对其进行重制，引擎版本为v2.4.7。

## 实现思路

游戏玩法很简单，控制小恐龙跳跃以躲避仙人掌，存活时间越久分数越高。

因此有以下几个主要功能需要实现：

| 功能点                   | 实现思路                                                     |
| ------------------------ | ------------------------------------------------------------ |
| 游戏初始化               | 播放挂载在TRex节点上的Animation：Init，设置playStatus为false，lifeStatus为true |
| 云朵移动                 | 设立一个cloudSpeed，在update生命周期中调用，如果playStatus为true就移动--将该cloud节点的x-cloudSpeed，如果锚点（1，0.5）到达画布最左边就移至画布右侧。 |
| 地面移动                 | 设立两个ground节点，水平排列，锚点都设为（1，0.5），设立一个groundSpeed，在update生命周期中调用，如果playStatus为true就移动--将该ground.x -= groundSpeed，如果ground锚点移出画布，就将其移至下一个ground节点的后面，这样轮流设置位置以达到地面的移动。 |
| 小恐龙跳跃               | 当lifeStatus为真时，小恐龙为可以跳跃状态，第一次跳跃也即游戏开始，将playStatus设为true，触发键盘事件会对其进行节流处理，即每秒只能触发一次跳跃事件，跳跃事件触发时会播放缓动动画。 |
| 实例化植物预制件（随机） | 游戏初始化时在第二个地面节点上先随机初始化一些预制件，这些预制件的父节点为其所处的地面节点，当当前ground移出画布时会触发实例化函数，首先判断其是否有子节点，有则全部删除重新实例，这样实例化处的植物位置不同，个数也不同。 |
| 碰撞检测及处理           | 给小恐龙和植物预制件都加好碰撞组件，如果发生碰撞，会将playStatus与lifeStatus设为false；跳跃动画也会停止，然后播放Trex节点的Dead动画。 |
| 游戏重新开始             | 当发生碰撞之后，lifeStatus与playStatus都设为false，游戏会结束，因此需要将重新开始按钮显示在画布上，同时空格键也可触发重开事件，若小恐龙正在跳跃还需将其归位，TRex节点开始播放Move动画，再判断小恐龙处在哪个地面节点上，将其子节点全部移除。。 |
| 分数显示                 | 当playStatus为true的时候开始播放分数跳动动画，发生碰撞事件时将其停止，并获取其播放时间，将当前播放时间与历史播放时间（初始化为0）比较，若当前更高则将当前时间赋给历史时间，同时在第一次碰撞时，history节点就显示在画布中。 |

## 项目结构

Assets文件夹为所有素材文件夹，其内有Animate文件夹（存放动画文件），Audio文件夹（存放音频文件），Prefab文件夹（存放预制件），Scene文件夹（存放场景文件），Script文件夹（存放脚本文件夹），Texture文件夹（存放纹理文件）。

项目主要功能实现是由脚本文件MainController.ts控制。

## 具体实现

### 1.游戏初始化

**API:** onLoad







