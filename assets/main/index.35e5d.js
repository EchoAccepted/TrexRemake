window.__require=function t(e,o,n){function i(u,s){if(!o[u]){if(!e[u]){var a=u.split("/");if(a=a[a.length-1],!e[a]){var c="function"==typeof __require&&__require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+u+"'")}u=a}var l=o[u]={exports:{}};e[u][0].call(l.exports,function(t){return i(e[u][1][t]||t)},l,l.exports,t,e,o,n)}return o[u].exports}for(var r="function"==typeof __require&&__require,u=0;u<n.length;u++)i(n[u]);return i}({MainController:[function(t,e,o){"use strict";cc._RF.push(e,"1ef82iwv1hIQpjR5SBIHTuB","MainController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,u=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(r<3?i(u):r>3?i(e,o,u):i(e,o))||u);return r>3&&u&&Object.defineProperty(e,o,u),u},u=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function u(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(u,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,n=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(i=(i=u.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){u.label=r[1];break}if(6===r[0]&&u.label<i[1]){u.label=i[1],i=r;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(r);break}i[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.plant1=null,e.plant2=null,e.plant3=null,e.plant4=null,e.plant5=null,e.plant6=null,e.ground1=null,e.ground2=null,e.cloudHigher=null,e.cloudLower=null,e.currentNode=null,e.historyNum=null,e.jumpAudio=null,e.scoreAudio=null,e.hitAudio=null,e.resetBtn=null,e.playStatus=!1,e.lifeStatus=!0,e.historyRecord=0,e.timer=0,e.jumpStatus=!1,e.JumpAnimate=null,e.jumpHeight=150,e.cloudSpeed=2,e.roadSpeed=5,e.moveAction=null,e.valid=!0,e.animState=null,e.animatedTime=null,e.score=0,e.blinkVaild=!0,e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.throttle,this),this.instiatePrefab(2),this.resetBtn.node.on("click",this.restart,this)},e.prototype.start=function(){var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!0,t.enabledDrawBoundingBox=!0,this.moveAction={animateTrexComponent:this.node.getComponent(cc.Animation)?this.node.getComponent(cc.Animation):null,trexStart:function(){return this.animateTrexComponent.play("Move")},trexJump:function(){return this.animateTrexComponent.play("Jump")},trexDie:function(){return this.animateTrexComponent.play("Dead")},trexPause:function(){return this.animateTrexComponent.pause()},trexStop:function(){return this.animateTrexComponent.stop()}}},e.prototype.throttle=function(t){var e=this;this.valid&&(this.onKeyDown(t),this.valid=!1,this.timer=setTimeout(function(){e.valid=!0},600))},e.prototype.onKeyDown=function(t){if(!this.jumpStatus&&t.keyCode===cc.macro.KEY.space)if(!this.playStatus&&this.lifeStatus)this.playStatus=!0,this.moveAction.trexStart(),this.jumpStatus=!0,this.currentNode.getComponent(cc.Animation).play(),this.jumpAction();else if(this.playStatus&&this.lifeStatus)this.jumpStatus=!0,this.jumpAction();else{if(this.playStatus&&!this.lifeStatus)return;this.playStatus||this.lifeStatus||this.restart()}},e.prototype.jumpAction=function(){return u(this,void 0,void 0,function(){var t=this;return s(this,function(e){switch(e.label){case 0:return this.moveAction.trexJump(),[4,this.jumpAnimate().then(function(){var e=setTimeout(function(){t.jumpStatus=!1,t.lifeStatus&&t.moveAction.trexStart(),clearTimeout(e)},600)})];case 1:return e.sent(),[2]}})})},e.prototype.jumpAnimate=function(){return u(this,void 0,void 0,function(){return s(this,function(){return this.JumpAnimate=cc.tween(this.node).by(.3,{position:cc.v3(0,this.jumpHeight,0)},{easing:"quadOut"}).by(.3,{position:cc.v3(0,-this.jumpHeight,0)},{easing:"quadIn"}).start(),[2]})})},e.prototype.jumpAnimateStop=function(){this.JumpAnimate.stop()},e.prototype.instiatePrefab=function(t){1==t?this.ground1.removeAllChildren():2==t&&this.ground2.removeAllChildren();for(var e=[this.plant1,this.plant2,this.plant3,this.plant4,this.plant5,this.plant6],o=Math.floor(3*Math.random())+3,n=0;n<o;n++){var i=cc.instantiate(e[Math.floor(6*Math.random())]);i.parent=1==t?this.ground1:this.ground2,i.setPosition(-(2400/o*(n+1)+100*Math.random()*(Math.random()>=.5?-1:1)),0)}},e.prototype.onCollisionEnter=function(){return u(this,void 0,void 0,function(){var t,e;return s(this,function(){return this.jumpAnimateStop(),this.moveAction.trexStop(),this.moveAction.trexDie(),this.playStatus=!1,this.lifeStatus=!1,(t=this.currentNode.getComponent(cc.Animation)).pause(),this.animState=t.getAnimationState("Main"),this.animatedTime=this.animState.time,this.resetBtn.node.y=-100,this.animatedTime>this.historyRecord&&(this.historyRecord=this.animatedTime,this.historyNum.y=95,(e=this.historyNum.children[1].getComponent(cc.Animation)).play("Main",this.historyRecord),e.pause(),e.setCurrentTime(this.historyRecord)),[2]})})},e.prototype.restart=function(){this.playStatus=!0,this.lifeStatus=!0,this.ground1.removeAllChildren(),this.ground2.removeAllChildren(),this.currentNode.getComponent(cc.Animation).play(),this.resetBtn.node.y=-500,this.node.y=-270,this.moveAction.trexStart()},e.prototype.onDestroy=function(){clearInterval(0!=this.timer?this.timer:null)},e.prototype.update=function(){this.playStatus&&this.lifeStatus&&(this.cloudHigher.x-=this.cloudSpeed,this.cloudLower.x-=this.cloudSpeed,this.ground1.x-=this.roadSpeed,this.ground2.x-=this.roadSpeed),this.ground1.x<=-480&&(this.ground1.setPosition(this.ground1.x+4800,this.ground1.y),this.instiatePrefab(1)),this.ground2.x<=-480&&(this.ground2.setPosition(this.ground2.x+4800,this.ground1.y),this.instiatePrefab(2)),this.cloudHigher.x<=-600&&this.cloudHigher.setPosition(this.cloudHigher.x+1150,this.cloudHigher.y),this.cloudLower.x<=-680&&this.cloudLower.setPosition(this.cloudLower.x+1200,this.cloudLower.y)},r([l(cc.Prefab)],e.prototype,"plant1",void 0),r([l(cc.Prefab)],e.prototype,"plant2",void 0),r([l(cc.Prefab)],e.prototype,"plant3",void 0),r([l(cc.Prefab)],e.prototype,"plant4",void 0),r([l(cc.Prefab)],e.prototype,"plant5",void 0),r([l(cc.Prefab)],e.prototype,"plant6",void 0),r([l(cc.Node)],e.prototype,"ground1",void 0),r([l(cc.Node)],e.prototype,"ground2",void 0),r([l(cc.Node)],e.prototype,"cloudHigher",void 0),r([l(cc.Node)],e.prototype,"cloudLower",void 0),r([l(cc.Node)],e.prototype,"currentNode",void 0),r([l(cc.Node)],e.prototype,"historyNum",void 0),r([l(cc.AudioClip)],e.prototype,"jumpAudio",void 0),r([l(cc.AudioClip)],e.prototype,"scoreAudio",void 0),r([l(cc.AudioClip)],e.prototype,"hitAudio",void 0),r([l(cc.Button)],e.prototype,"resetBtn",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PrefabDestory:[function(t,e,o){"use strict";cc._RF.push(e,"e085dMfachAWYEfPHsY8ZSZ","PrefabDestory");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,u=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(r<3?i(u):r>3?i(e,o,u):i(e,o))||u);return r>3&&u&&Object.defineProperty(e,o,u),u};Object.defineProperty(o,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,a=u.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.start=function(){},r([a(cc.Label)],e.prototype,"label",void 0),r([a],e.prototype,"text",void 0),r([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}]},{},["MainController","PrefabDestory"]);